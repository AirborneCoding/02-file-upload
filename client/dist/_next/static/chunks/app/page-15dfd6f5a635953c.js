(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6377:function(e,t,a){Promise.resolve().then(a.bind(a,111))},111:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var s=a(7437),l=a(2265),r=a(9222),n=e=>{let{data:t,setData:a}=e,[n,o]=(0,l.useState)(""),[i,d]=(0,l.useState)(null),[c,m]=l.useState(!1),[h,u]=l.useState(""),x=async e=>{e.preventDefault();let s=new FormData;s.append("title",n),s.append("image",i);try{m(!0);let e=await r.Z.post("/api/v1/fileUpload",s,{headers:{"Content-Type":"multipart/form-data"}});a([e.data.object,...t]),m(!1)}catch(e){u(e.response.data.msg),setTimeout(()=>{u("")},1e4),m(!1)}o(""),d(null)};return(0,s.jsxs)("form",{className:"form-father",onSubmit:x,children:[(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),(0,s.jsx)("input",{type:"text",className:"form-input",id:"title",value:n,onChange:e=>o(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsx)("label",{htmlFor:"",className:"form-label",children:"Image :"}),i?(0,s.jsx)("img",{src:URL.createObjectURL(i),alt:"Selected",className:"w-full h-20 object-contain"}):(0,s.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,s.jsxs)("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-2  ",children:[(0,s.jsx)("svg",{"aria-hidden":"true",className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,s.jsxs)("p",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]})]}),(0,s.jsx)("input",{accept:"image/*",type:"file",id:"dropzone-file",onChange:e=>d(e.target.files[0]),className:"hidden"})]})})]}),(0,s.jsx)("div",{className:"form-row",children:(0,s.jsx)("button",{type:"submit",className:"btn-nc bg-gray-500",children:c?"Loading...":"Submit"})}),h&&(0,s.jsx)("div",{className:"form-row",children:(0,s.jsx)("p",{className:"text-xs p-1 bg-red-300 rounded",children:h})})]})},o=e=>{let{data:t,loading:a,deleteData:l}=e;return(0,s.jsxs)("section",{className:"body-container mb-16 pb-16",children:[(0,s.jsxs)("h4",{className:"font-bold",children:["Photo Uploaded : ",t.length]}),(0,s.jsx)("ul",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4 mt-5",children:a?(0,s.jsx)("p",{children:"Loading..."}):t.length<1?"No Photo uploaded , please insert one":null==t?void 0:t.map(e=>{let{title:t,image:{url:a}}=e;return(0,s.jsxs)("li",{className:" rounded cursor-pointer hover:shadow-xl hover:shadow-black",children:[(0,s.jsxs)("div",{className:"flex justify-between bg-white p-3  items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:t}),(0,s.jsx)("button",{className:"btn-nc bg-red-700 inline-block",onClick:()=>{l(e._id)},children:"delete"})]}),(0,s.jsx)("img",{src:a,alt:t,className:"h-96  w-full object-cover"})]},e._id)})})]})},i=()=>{let[e,t]=l.useState(!1),[a,i]=l.useState([]),d=async()=>{try{t(!0);let e=await r.Z.get("/api/v1/fileUpload");i(e.data.objects),t(!1)}catch(e){t(!1)}};l.useEffect(()=>{d()},[]);let c=async e=>{try{t(!0);let s="/api/v1/fileUpload/".concat(e);await r.Z.delete(s),i(a.filter(t=>t._id!==e)),t(!1)}catch(e){t(!1)}};return(0,s.jsxs)("main",{className:"mt-8 mb-15",children:[(0,s.jsxs)("h2",{className:"body-container text-center text-2xl font-bold",children:[(0,s.jsx)("span",{className:"underline",children:"File Upload"})," ",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"(Upload Photos to test)"]}),(0,s.jsx)(n,{data:a,setData:i}),(0,s.jsx)(o,{data:a,loading:e,deleteData:c})]})}}},function(e){e.O(0,[750,971,596,744],function(){return e(e.s=6377)}),_N_E=e.O()}]);